FROM haskell:8.6.5

RUN  apt update && apt install libicu-dev libtinfo-dev libgmp-dev \
    && stack upgrade \
    && git clone https://github.com/haskell/haskell-ide-engine --recurse-submodules \
    && cd haskell-ide-engine \ 
    && stack ./install.hs hie-8.6.5 

RUN cd haskell-ide-engine && stack ./install.hs data